Dropzone.autoDiscover=!1,jQuery(document).ready(function(e){var t=["toplevel_page_cfm-hosting-publish-episode","admin_page_cfm-hosting-publish-episode","captivate-sync_page_cfm-hosting-publish-episode"],a=["toplevel_page_cfm-hosting-edit-episode","admin_page_cfm-hosting-edit-episode","captivate-sync_page_cfm-hosting-edit-episode"];-1!==e.inArray(cfmsync.CFMH_CURRENT_SCREEN,t)&&e("#cfm-form-publish-episode").cfmLocalStorage({exclude_name:["_sec","_wp_http_referer"],interval:432e5});var o=e("input[name=show_id]").val(),r=e("input[name=media_created_at]"),s=e("input[name=media_id]"),n=e("input[name=media_bit_rate]"),d=e("input[name=media_bit_rate_str]"),l=e("input[name=media_duration]"),c=e("input[name=media_duration_str]"),p=e("input[name=media_id3_size]"),u=e("input[name=media_name]"),m=e("input[name=media_size]"),f=e("input[name=media_type]"),_=e("input[name=media_url]"),h=e("input[name=media_shows_id]"),v=e("input[name=media_updated_at]"),g=e("input[name=media_users_id]");function w(t){new Date>new Date(t)?(e("button[name=episode_publish]").html("Publish Episode"),e("button[name=episode_update]").html("Update Episode")):(e("button[name=episode_publish]").html("Schedule Episode"),e("button[name=episode_update]").html("Schedule Episode"))}e("#podcast-dropzone").dropzone({autoProcessQueue:!0,uploadMultiple:!1,parallelUploads:1,maxFiles:1,maxFilesize:300,timeout:5e5,url:cfm_script.cfm_url+"/shows/"+o+"/media",acceptedFiles:".mp3, .mp4, .m4a",addRemoveLinks:!0,dictDefaultMessage:'<i class="far fa-waveform"></i><div class="dz-content">Drag and drop your audio file* <br> or <strong>browse files</strong><small>MP3, M4A, MP4 file types</small></div>',init:function(){var a=this;if(existingFile=_.val(),existingFile){var o={name:existingFile.replace(/^.*[\\\/] /,""),size:1,status:"success",accepted:!0,processing:!0};a.files.push(o)}a.on("addedfile",function(t){var o=t.size,i=a.files.length;o>314572800&&cfmsync_toaster("error","Audio file maximum allowed size exceeded (300MB)."),i>1&&e.each(a.files,function(e,t){e<i-1&&a.removeFile(t)})}),a.on("sending",function(e,t,a){let o=cfm_script.xfNr5Wsp;o=(o=o.slice(29)).slice(0,-29),t.setRequestHeader("Authorization","Bearer "+o)}),a.on("processing",function(t,a){e("#cfm-audio-uploader .dropzone-uploader").fadeOut(100,function(){e("#cfm-audio-uploader .dropzone-preloader").show(),e("#cfm-audio-uploader .progress-info").html("Uploading <strong>"+t.upload.filename+"</strong>"),e("#cfm-audio-uploader .dropzone-result").html(""),e("#episode_draft, #episode_update").prop("disabled",!0)})}),a.on("uploadprogress",function(t,a,o){e("#cfm-audio-uploader .progress-bar").css("width",a+"%")}),a.on("success",function(o,i){var w=i.media,b=String(w.media_bit_rate);r.val(w.created_at),s.val(w.id),n.val(w.media_bit_rate),d.val(b.substring(0,3)+"kbps"),l.val(w.media_duration),c.val(cfm_milliseconds_to_str(1e3*w.media_duration)),p.val(w.media_id3_size),u.val(w.media_name),m.val(w.media_size),f.val(w.media_type),_.val(w.media_url),h.val(w.shows_id),v.val(w.updated_at),g.val(w.users_id),e("input[name=media_id]").trigger("change"),e("#cfm-audio-uploader .dropzone-preloader").fadeOut(100,function(){e("#cfm-audio-uploader .dropzone-result").html('<audio controls="controls" preload="none"><source type="audio/mpeg" src="'+w.media_url+'"> Your browser does not support the audio element. </audio><div class="dropzone-result-info d-flex justify-content-between"><div class="result-info"><strong>'+w.media_name+"</strong> <br>"+b.substring(0,3)+"kbps | "+cfm_milliseconds_to_str(1e3*w.media_duration)+'</div><div class="result-actions"><button class="replace-audio btn btn-outline-dark">Replace audio file</button></div></div>')}),cfmsync_toaster("success","Audio file successfully uploaded to your episode."),$episode_publish_text=!0===cfm_is_datetime_future(e("input[name=publish_date]").val()+" "+e("input[name=publish_time]").val())?"Schedule Episode":"Publish Episode",e("#episode_update").length||($episode_publish_id=-1!==e.inArray(cfmsync.CFMH_CURRENT_SCREEN,t)?"episode_publish":"episode_update",e("#cfm-episode-save").html('<button type="submit" id="episode_draft" name="episode_draft" class="btn btn-primary full-md-button me-3">Save As Draft</button><button type="submit" id="'+$episode_publish_id+'" name="'+$episode_publish_id+'" class="btn btn-primary full-md-button" >'+$episode_publish_text+"</button>")),e("#episode_draft, #episode_update").prop("disabled",!1),a.removeAllFiles(!0)}),a.on("error",function(t,o){e("#cfm-audio-uploader .dropzone-preloader").fadeOut(100,function(){e("#cfm-audio-uploader .dropzone-result").html('<div class="cfm-alert cfm-alert-error"><span class="alert-icon"></span> <span class="alert-text">Media file upload error</span></div>'),e("#cfm-audio-uploader .dropzone-uploader").show()}),a.removeAllFiles(!0)})}}),e(document).on("click","#cfm-audio-uploader .cancel-upload",function(t){t.preventDefault(),e("#cfm-audio-uploader .dropzone-preloader").fadeOut(100,function(){e("#cfm-audio-uploader .dropzone-uploader").show(),e("#cfm-audio-uploader .progress-info").html(""),e("#cfm-audio-uploader .progress-bar").css("width","0")}),Dropzone.forElement("#podcast-dropzone").off("error"),Dropzone.forElement("#podcast-dropzone").removeAllFiles(!0)}),e(document).on("click","#cfm-audio-uploader .replace-audio",function(t){t.preventDefault(),e("#cfm-audio-uploader .dropzone-result").html(""),e("#cfm-audio-uploader .dropzone-uploader").show(),Dropzone.forElement("#podcast-dropzone").removeAllFiles(!0)}),e("#post_title_check").change(function(){e("#post_title_check:checked").length==e("#post_title_check").length?e(".cfm-field.cfm-itunes-title").fadeIn(200):e(".cfm-field.cfm-itunes-title").fadeOut(200)}),e("input[name=publish_date]").datepicker({changeMonth:!0,changeYear:!0,showOtherMonths:!0,selectOtherMonths:!0,defaultDate:new Date,dateFormat:"mm/dd/yy",dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],onSelect:function(t){w(t+" "+e("input[name=publish_time]").val()),e("input[name=publish_date]").trigger("change")}}),e(document).on("click",".cfm-datepicker .input-group .btn",function(t){t.preventDefault(),e("input[name=publish_date]").focus()}),e(document).on("click",".cfm-timepicker .dropdown-menu a.dropdown-item",function(t){var a=e(this).text();w(e("input[name=publish_date]").val()+" "+a),e("input[name=publish_time]").val(a),e("input[name=publish_time]").trigger("change")}),e(document).on("click","#artwork-dropzone",function(t){var a;t.preventDefault(),$this=e(this),a&&a.open(),(a=wp.media({title:"Select Episode Cover Art",multiple:!1,library:{type:"image"}})).on("select",function(){var t=a.state().get("selection"),o=0;if(0==o&&t.each(function(e){o=e.id}),0!=o){var i=a.state().get("selection").first().toJSON();i.url&&(e("#episode_artwork").val(i.url),e("#episode_artwork_id").val(o),e("#episode_artwork_width").val(i.width),e("#episode_artwork_height").val(i.height),e("#episode_artwork_type").val(i.mime),e("#episode_artwork_filesize").val(i.filesizeInBytes),e("#episode_artwork, #episode_artwork_id, #episode_artwork_width, #episode_artwork_height, #episode_artwork_type, #episode_artwork_filesize").trigger("change"),$this.parent().hide(),e("#cfm-artwork-uploader .fd-replace").fadeIn(200),e("#cfm-artwork-uploader .fd-result").html('<img src="'+i.url+'" width="200" height="200" class="img-fluid">').hide().fadeIn(650))}}),a.on("open",function(){var t=a.state().get("selection");ids=e("#episode_artwork_id").val().split(","),ids.forEach(function(e){attachment=wp.media.attachment(e),attachment.fetch(),t.add(attachment?[attachment]:[])})}),a.open()}),e(document).on("click","#cfm-artwork-uploader .remove-image",function(t){t.preventDefault(),e("#cfm-artwork-uploader .fd-replace").fadeOut(100,function(){e("#cfm-artwork-uploader .fd-uploader").show(),e("#cfm-artwork-uploader .fd-result").html('<i class="fal fa-image"></i>'),e("#episode_artwork").val(""),e("#episode_artwork_id").val(""),e("#episode_artwork_width").val(""),e("#episode_artwork_height").val(""),e("#episode_artwork_type").val(""),e("#episode_artwork_filesize").val(""),e("#episode_artwork, #episode_artwork_id, #episode_artwork_width, #episode_artwork_height, #episode_artwork_type, #episode_artwork_filesize").trigger("change")})}),e(document).on("click","#cfm-artwork-uploader .upload-new-image",function(t){t.preventDefault(),e("#cfm-artwork-uploader .fd-replace").fadeOut(100,function(){e("#cfm-artwork-uploader .fd-uploader").show()})}),e(document).on("click","#featured-image-dropzone",function(a){var o;a.preventDefault(),$this=e(this),o&&o.open(),(o=wp.media({title:"Select Website Featured Image",multiple:!1,library:{type:"image"}})).on("select",function(){var a=o.state().get("selection"),i=0;if(0==i&&a.each(function(e){i=e.id}),0!=i){var r=o.state().get("selection").first().toJSON();r.url&&(e("#featured_image").val(i),e("#featured_image").trigger("change"),$this.parent().hide(),e("#cfm-featured-image-uploader .fd-replace").fadeIn(200),e("#cfm-featured-image-uploader .fd-result").html('<img src="'+r.url+'" width="200" height="200" class="img-fluid">').hide().fadeIn(650),-1!==e.inArray(cfmsync.CFMH_CURRENT_SCREEN,t)&&localStorage.setItem(cfmsync.CFMH_SHOWID+"_featured_image_url_local",r.url))}}),o.open()}),e(document).on("click","#cfm-featured-image-uploader .remove-image",function(t){t.preventDefault(),e("#cfm-featured-image-uploader .fd-replace").fadeOut(100,function(){e("#cfm-featured-image-uploader .fd-uploader").show(),e("#cfm-featured-image-uploader .fd-result").html('<i class="fal fa-image"></i>'),e("#featured_image").val("0"),e("#featured_image").trigger("change")}),localStorage.removeItem(cfmsync.CFMH_SHOWID+"_featured_image_url_local")}),e(document).on("click","#cfm-featured-image-uploader .upload-new-image",function(t){t.preventDefault(),e("#cfm-featured-image-uploader .fd-replace").fadeOut(100,function(){e("#cfm-featured-image-uploader .fd-uploader").show()})}),e(document).on("click","#enable_wordpress_editor",function(t){this.checked?(e(".cfm-captivate-editor").addClass("hidden"),e(".cfm-wordpress-editor").removeClass("hidden")):(e(".cfm-captivate-editor").removeClass("hidden"),e(".cfm-wordpress-editor").addClass("hidden"))}),e(window).keydown(function(e){if(13==e.keyCode&&"textarea"!=e.target.tagName.toLowerCase())return e.preventDefault(),!1});var b=null;if(e(document).on("submit","#cfm-form-publish-episode",function(t){var a=e("#"+b),o=a.html();e("button[type=submit]").prop("disabled",!0),a.html('<i class="fas fa-spinner fa-spin me-2"></i> Processing...'),e("#episode-cancel").addClass("disabled");var i=e("input[name=post_title]").val(),r=e("textarea[name=post_content]").val(),s=e("#seo_description").val(),n=0,d="";if(""==e("input[name=media_id]").val()&&"episode_draft"!=b&&(e("#cfm-audio-uploader").addClass("invalid-control"),e("#cfm-audio-uploader-error").length||e('<div id="cfm-audio-uploader-error" class="invalid-feedback">You must upload an audio for your episode.</div>').insertAfter("#cfm-audio-uploader"),n+=1,d+="<br>You must upload an audio for your episode.<br>"),""==i&&(e("input[name=post_title]").addClass("is-invalid"),e("#post_title-error").length||e('<div id="post_title-error" class="invalid-feedback">You must enter a title for your episode.</div>').insertAfter("input[name=post_title]"),n+=1,d+="<br>Episode Title: Check for any unusual or invalid characters, remove and resave.<br>"),""!=r&&"<p><br></p>"!=r||!e(".cfm-captivate-editor").is(":visible")||"episode_draft"==b||(e("#cfm-field-wpeditor").addClass("invalid-control is-invalid"),e(".cfm-episode-shownotes .ql-toolbar.ql-snow").addClass("is-invalid"),e("#captivate-shownotes-error").length||e('<div id="captivate-shownotes-error" class="invalid-feedback">You must enter show notes for your episode.</div>').insertAfter("#cfm-field-wpeditor"),n+=1,d+="<br>Episode Show NOTES: Check for any unusual or invalid characters, remove and resave.<br>"),e(".cfm-wordpress-editor").is(":visible")&&"episode_draft"!=b){var l="";if(e("#wp-post_content_wp-wrap").hasClass("html-active"))l=e("#post_content_wp").val();else l=tinymce.get("post_content_wp").getContent();""==l&&(e("#wp-post_content_wp-wrap").addClass("invalid-control"),e("#wp-shownotes-error").length||e('<div id="wp-shownotes-error" class="invalid-feedback">You must enter show notes for your episode.</div>').insertAfter("#wp-post_content_wp-wrap"),n+=1,d+="<br>Episode Show NOTES: Check for any unusual or invalid characters, remove and resave.<br>")}s.length>300&&(e("#seo_description").addClass("is-invalid"),n+=1,d+="<br>SEO Description: length must be less than or equal to 300 characters long.<br>");var c=e("input[name=episode_artwork_id]").val(),p=e("input[name=episode_artwork_width]").val(),u=e("input[name=episode_artwork_height]").val(),m=e("input[name=episode_artwork_type]").val(),f=e("input[name=episode_artwork_filesize]").val();if(""!=c&&(p!=u||p<1400||p>3e3||u<1400||u>3e3||f>5e5||"image/jpeg"!=m&&"image/jpg"!=m&&"image/png"!=m)&&(e("#cfm-artwork-uploader").addClass("invalid-control"),e("#cfm-artwork-uploader-error").length||e('<div id="cfm-artwork-uploader-error" class="invalid-feedback mt-4">Your artwork should be a minimum of 1,400 pixels square and a maximum of 3,000 pixels square with less than 500kb in filesize. Both height and width must be the same.</div>').insertAfter("#cfm-artwork-uploader"),n+=1,d+="<br>Episode Artwork: Follow the artwork specifications, remove and reupload.<br>"),n>0)return cfmsync_toaster("error","<strong>Could not save - a setting is invalid</strong>"+d),e("button[type=submit]").prop("disabled",!1),e("#episode-cancel").removeClass("disabled"),a.html(o),t.preventDefault(),!1}),e(document).on("click",'button[name="episode_draft"]',function(t){b="episode_draft",e('input[name="submit_action"]').val("draft")}),e(document).on("click",'button[name="episode_update"]',function(t){b="episode_update",e('input[name="submit_action"]').val("update")}),e(document).on("click",'button[name="episode_publish"]',function(t){b="episode_publish",e('input[name="submit_action"]').val("publish")}),e(document).on("keyup","#post_title",function(t){""!=e(this).val()&&(e(this).removeClass("is-invalid"),e("#post_title-error").remove())}),"on"==e("#enable_wordpress_editor").val())if(e("#wp-post_content_wp-wrap").hasClass("html-active"))e(document).on("keyup","#post_content_wp",function(t){""!=e(this).val()&&(e("#wp-post_content_wp-wrap").removeClass("invalid-control is-invalid"),e("#wp-shownotes-error").remove())});else{var y=tinymce.get("post_content_wp");null!==y&&y.on("keyup",function(t){e("#wp-post_content_wp-wrap").removeClass("invalid-control is-invalid"),e("#wp-shownotes-error").remove()})}e(document).on("keyup","#seo_description",function(t){var a=e(this).val().length<155?e(this).val().length/155*100:100,o="orange";a>=50&&a<=99?o="#29ab57":a>=100&&(o="#dc3545"),e(".cfm-seo-description-progress").css("background-color",o),e(".cfm-seo-description-progress").css("width",a+"%")}),e(document).on("focus","#post_title.post-title-empty",function(t){$this=e(this),$this.blur(function(){$this.hasClass("post-title-empty")&&(e("input[name=post_name]").val(cfm_convert_to_slug($this.val())),""!=$this.val()&&$this.removeClass("post-title-empty"))})}),e(document).on("keyup","input[name=post_name]",function(t){e(this).val(cfm_convert_to_slug(e(this).val()))}),e(document).on("click","#add-website-category",function(t){t.preventDefault();var a=e("select[name=category_parent]").val(),o=e("input[name=website_category]").val();""!=o?e.ajax({url:cfmsync.ajaxurl,type:"post",dataType:"json",data:{action:"add-webcategory",category_parent:a,category:o,_nonce:cfmsync.ajaxnonce},success:function(t){"error"==t?cfmsync_toaster("error","Something went wrong. Please refresh the page and try again."):(e(".cfm-website-categories-wrap > ul").prepend(t.cat_checklist),e(".cfm-category-parent").html(t.cat_parent),e("select[name=category_parent]").prop("selectedIndex",0),e("input[name=website_category]").val(""),cfmsync_toaster("success","Category has been successfully added and selected."))},error:function(e){cfmsync_toaster("error","Category already exists.")}}):e("input[name=website_category]").addClass("is-invalid is-sub-validation").focus(),t.preventDefault()}),e(document).on("click","#add-website-tags",function(t){t.preventDefault();var a=e("input[name=website_tags]").val(),o=a.split(","),r=[],s=[],n=[];for(i=0;i<o.length;i++)s.push(e.trim(o[i].toLowerCase()));for(e(".cfm-website-tags-wrap ul li label").each(function(){var t=e.trim(e(this).text().toLowerCase());-1!==e.inArray(t,s)&&e(this).find("input[type=checkbox]").prop("checked",!0),n.push(t)}),i=0;i<o.length;i++){var d=e.trim(o[i].toLowerCase());-1==e.inArray(d,n)&&r.push(e.trim(o[i]))}0!==r.length?e.ajax({url:cfmsync.ajaxurl,type:"post",data:{action:"add-webtags",tags:r.toString(),_nonce:cfmsync.ajaxnonce},success:function(t){"error"==t?cfmsync_toaster("error","Something went wrong. Please refresh the page and try again."):(e(".cfm-website-tags-wrap > ul").prepend(t),e("input[name=website_tags]").val(""),cfmsync_toaster("success","Tag(s) has been successfully added and selected."))}}):e("input[name=website_tags]").val(""),""==a&&e("input[name=website_tags]").addClass("is-invalid is-sub-validation").focus(),t.preventDefault()});var k="input[name=transcript_file]",C="textarea[name=transcript_text]",S="textarea[name=transcript_current]",x='<a id="transcript-add" data-bs-toggle="modal" data-bs-target="#transcript-modal" href="#"><i class="fal fa-file-alt me-2"></i> Add a transcript to this episode </a>',z='<div class="transcript-text">Have a transcript file? Upload it directly... </div><a id="upload-transcript" href="javascript: void(0);"><i class="fal fa-cloud-upload" aria-hidden="true"></i> Upload File</a>';e(document).on("click","#upload-transcript",function(t){e(k).focus().trigger("click")}),e(document).on("click","#update-transcript",function(t){if(0===e(k).get(0).files.length){if(""!=e(C).val())var a="<strong>"+cfm_truncate(e(C).val(),20)+'</strong> <a id="cfm-transcript-edit" class="float-end" data-bs-toggle="modal" data-bs-target="#transcript-modal" href="#"><i class="fal fa-edit"></i> Edit</a><div class="mt-2"><a id="transcript-remove" class="transcript-remove text-danger" href="javascript: void(0);"><i class="fal fa-trash-alt"></i> Remove</a></div>';else a=x;e(S).val(e(C).val()),e("input[name=transcript_type]").val("text")}else{var o=e(k).val().replace(/C:\\fakepath\\/i,"");a="<strong>"+o+'</strong> <a id="cfm-transcript-edit" class="float-end" data-bs-toggle="modal" data-bs-target="#transcript-modal" href="#"><i class="fal fa-undo fa-flip-horizontal"></i> Replace</a><div class="mt-2"><a id="transcript-remove" class="transcript-remove text-danger" href="javascript: void(0);"><i class="fal fa-trash-alt"></i> Remove</a></div>';e(S).val(o),e("input[name=transcript_type]").val("file")}e("input[name=transcript_updated]").val("1"),e(".cfm-episode-transcription .cmf-transcript-wrap").html(a),e("#transcript-modal").modal("hide")}),e(document).on("click","#cancel-transcript, #close-transcript",function(t){"file"==e("input[name=transcript_type]").val()?(e(C).val(""),e(".transcript-upload-box").html('<div class="transcript-text">File uploaded: <strong>'+e(S).val()+'</strong></div><a id="remove-transcript-file" class="text-danger" href="javascript: void(0);"><i class="fal fa-trash-alt"></i> Remove</a>'),e(C).prop("disabled",!0),e(".transcript-upload-box").removeClass("disabled")):(e(C).val(e(S).val()),e(".transcript-upload-box").html(z),e(".transcript-upload-box").addClass("disabled"),e(C).prop("disabled",!1))}),e(document).on("click","#transcript-remove",function(t){e(C).val(""),e(k).val(""),e(S).val(""),e("input[name=transcript_updated]").val("1"),e(C).prop("disabled",!1),e(".transcript-upload-box").removeClass("disabled"),e(".cfm-episode-transcription .cmf-transcript-wrap").html(x),e(".transcript-upload-box").html(z)}),e(document).on("change keyup",C,function(t){""!=e(this).val()?e(".transcript-upload-box").addClass("disabled"):e(".transcript-upload-box").removeClass("disabled")}),e(document).on("change",k,function(t){if(0===e(this).get(0).files.length)e(C).prop("disabled",!1),e(".transcript-upload-box").html(z);else{var a=e(this).val().replace(/C:\\fakepath\\/i,"");e(C).prop("disabled",!0),e(".transcript-upload-box").html('<div class="transcript-text">File uploaded: <strong>'+a+'</strong></div><a id="remove-transcript-file" class="text-danger" href="javascript: void(0);"><i class="fal fa-trash-alt"></i> Remove</a>')}}),e(document).on("click","#remove-transcript-file",function(t){e(k).val(""),e(k).trigger("change")}),e(window).load(function(){!0===cfm_is_datetime_future(e("input[name=publish_date]").val()+" "+e("input[name=publish_time]").val())&&e("button[name=episode_update] , button[name=episode_publish]").html("Schedule Episode")}),e(document).on("keyup",".form-control.is-invalid",function(t){""!=e(this).val()&&e(this).removeClass("is-invalid is-sub-validation")}),e(document).on("focus",".form-control.is-sub-validation",function(t){e(this).blur(function(){e(this).removeClass("is-invalid is-sub-validation")})}),e(document).on("click","#cfm-duplicate-episode",function(t){t.preventDefault();var a=e(this),o=a.html(),i=a.attr("data-reference"),r=a.attr("data-nonce");e.ajax({url:cfmsync.ajaxurl,type:"post",data:{action:"duplicate-episode",_nonce:r,post_id:i},dataType:"json",beforeSend:function(){a.prop("disabled",!0),a.siblings("button").prop("disabled",!0),a.html('<i class="fas fa-spinner fa-spin me-2"></i> Duplicating episode...')},success:function(t){a.prop("disabled",!1),a.siblings("button").prop("disabled",!1),a.html(o),e("#confirmation-modal").modal("hide"),"success"==t.output?(cfmsync_toaster("success",t.message),window.location.replace(t.redirect_url)):cfmsync_toaster("error",t.message)}}),t.preventDefault()}),e(".cfm-insert-variable-modal").on("show.bs.modal",function(t){var a=e(t.relatedTarget),o=a.data("confirmation-reference"),i=a.data("type"),r=e(this);r.find(".modal-body input[name=dt_type]").val(["dynamic"]),r.find(".modal-footer .modal-confirm").attr("data-reference",o),r.find(".modal-footer .modal-confirm").attr("data-type",i)}),e(".cfm-insert-variable-modal").on("hidden.bs.modal",function(t){var a=e(this);a.find(".modal-footer .modal-confirm").removeAttr("data-reference"),a.find(".modal-footer .modal-confirm").removeAttr("data-type")}),-1!==e.inArray(cfmsync.CFMH_CURRENT_SCREEN,t)&&setInterval(function(){if("on"==e(document).cfmGetLocalStorage("cfm-form-publish-episode","enable_wordpress_editor")){tinymce.triggerSave();var t="";if(e("#wp-post_content_wp-wrap").hasClass("html-active"))t=e("#post_content_wp").val();else{var a=tinymce.get("post_content_wp");null!==a&&(t=a.getContent())}localStorage.setItem(cfmsync.CFMH_SHOWID+"_post_content_wp_local",t)}},5e3),e(window).load(function(){if(e(".cfm-shownotes-editor").fadeIn(),-1!==e.inArray(cfmsync.CFMH_CURRENT_SCREEN,t)){const t=e(document).cfmGetLocalStorage("cfm-form-publish-episode","enable_wordpress_editor"),a=localStorage.getItem(cfmsync.CFMH_SHOWID+"_post_content_wp_local"),i=e(document).cfmGetLocalStorage("cfm-form-publish-episode","media_url"),r=e(document).cfmGetLocalStorage("cfm-form-publish-episode","media_name"),s=e(document).cfmGetLocalStorage("cfm-form-publish-episode","media_bit_rate_str"),n=e(document).cfmGetLocalStorage("cfm-form-publish-episode","media_duration_str");if("on"==t&&e("#enable_wordpress_editor").trigger("click"),"on"==t&&""!=a&&void 0!==a&&null!==a)if(e("#wp-post_content_wp-wrap").hasClass("html-active"))e("#post_content_wp").val(a);else{var o=tinymce.get("post_content_wp");null!==o&&o.setContent(a)}""!=i&&void 0!==i&&null!==i&&(e("#cfm-audio-uploader .dropzone-uploader").hide(),e("#cfm-audio-uploader .dropzone-result").html('<audio controls="controls" preload="none"><source type="audio/mpeg" src="'+i+'"> Your browser does not support the audio element. </audio><div class="dropzone-result-info d-flex justify-content-between"><div class="result-info"><strong>'+r+"</strong> <br>"+s+" | "+n+'</div><div class="result-actions"><button class="replace-audio btn btn-outline-dark">Replace audio file</button></div></div>'),e("#episode_draft, #episode_update").prop("disabled",!1));const d=e(document).cfmGetLocalStorage("cfm-form-publish-episode","episode_artwork");""!=d&&void 0!==d&&null!==d&&(e("#cfm-artwork-uploader .fd-uploader").hide(),e("#cfm-artwork-uploader .fd-replace").show(),e("#cfm-artwork-uploader .fd-result").html('<img src="'+d+'" width="200" height="200" class="img-fluid">'));const l=localStorage.getItem(cfmsync.CFMH_SHOWID+"_featured_image_url_local");""!=l&&void 0!==l&&null!==l&&(e("#cfm-featured-image-uploader .fd-uploader").hide(),e("#cfm-featured-image-uploader .fd-replace").show(),e("#cfm-featured-image-uploader .fd-result").html('<img src="'+l+'" width="200" height="200" class="img-fluid">'));const c=e(document).cfmGetLocalStorage("cfm-form-publish-episode","itunes_title");""!=c&&void 0!==c&&null!==c?(e("input[name=post_title_check]").prop("checked",!0),e(".cfm-itunes-title").show()):e("input[name=post_title_check]").prop("checked",!1),e("select[name=category_parent]").val("-1"),e("input[name=website_category]").val(""),e("input[name=website_tags]").val("")}if(-1!==e.inArray(cfmsync.CFMH_CURRENT_SCREEN,a)){var i=cfm_get_url_vars().action,r=cfm_get_url_vars().eid;if("published"==i||"failed"==i){var s=cfmsync.CFMH_SHOWID+"_cfm-form-publish-episode_save_storage";localStorage.removeItem(s),localStorage.removeItem(cfmsync.CFMH_SHOWID+"_featured_image_url_local"),localStorage.removeItem(cfmsync.CFMH_SHOWID+"_post_content_wp_local"),localStorage.removeItem(cfmsync.CFMH_SHOWID+"_shownotes_local"),localStorage.removeItem(cfmsync.CFMH_SHOWID+"_shownotes_local_html");var n=cfmsync.CFMH_ADMINURL+"admin.php?page=cfm-hosting-edit-episode&show_id="+cfmsync.CFMH_SHOWID+"&eid="+r;setTimeout(function(){window.history.pushState(null,null,n)},2e3)}}})});